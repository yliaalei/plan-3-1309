<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Контент-планировщик</title>
<style>
  :root{
    --bg:#f6fbff; /* light blue */
    --beige:#f3efe6;
    --blue:#4a90e2;
    --muted:#6b7280;
    --card:#ffffff;
    --mint:#c8f7e8;
    --yellow:#fff7c2;
    --pink:#ffd7ea;
    --lavender:#e8e1ff;
    --cell-border: rgba(0,0,0,0.06);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg) 0%, #f0f6fb 100%);}
  /* когда меню открыто — даём отступ снизу, чтобы календарь не "скрывался" под меню */
  body.menu-open .app{ padding-bottom: calc(46vh + 28px); }

  .app {
    max-width:760px;
    margin:0 auto;
    padding:14px;
    box-sizing:border-box;
  }
  header{
    display:flex;
    gap:12px;
    align-items:start;
    margin-bottom:8px;
  }
  .title {
    flex:1;
  }
  .title h1{
    font-size:20px;
    margin:0;
    color:var(--blue);
    letter-spacing:0.2px;
  }
  .subtitle{
    font-size:12px;
    color:var(--muted);
    margin-top:6px;
    background:linear-gradient(90deg, rgba(243,239,230,0.6), rgba(255,255,255,0));
    padding:8px;
    border-radius:8px;
  }

  .desc {
    font-size:13px;
    color:var(--muted);
    margin:10px 0 12px 0;
    padding:10px;
    border-radius:10px;
    background:linear-gradient(90deg, rgba(242,248,255,0.6), rgba(249,246,240,0.5));
  }

  .calendar-card{
    background:var(--card);
    border-radius:12px;
    padding:10px;
    box-shadow: 0 4px 18px rgba(20,40,80,0.06);
    margin-bottom:14px;
    transition: padding-bottom 200ms;
  }
  .cal-head{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    margin-bottom:8px;
  }
  .cal-head .month{
    font-weight:600;
    color:var(--blue);
  }
  .cal-nav button{
    background:transparent;
    border:1px solid var(--cell-border);
    padding:6px 8px;
    border-radius:8px;
    font-size:14px;
  }
  table.calendar{
    width:100%;
    border-collapse:collapse;
    table-layout:fixed;
    font-size:13px;
  }
  table.calendar th{
    text-align:center;
    padding:6px 0;
    color:var(--muted);
    font-weight:600;
    font-size:12px;
  }
  /* заменил фиксированную высоту на min-height и снял overflow:hidden чтобы ничего не обрезалось */
  table.calendar td{
    width:14.285%;
    border:1px solid var(--cell-border);
    vertical-align:top;
    padding:6px;
    min-height:64px; /* гибкий минимум */
    box-sizing:border-box;
    position:relative;
    background:transparent;
    border-radius:8px;
    overflow:visible;
  }
  .date-btn{
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    align-items:flex-start;
    width:100%;
    height:100%;
    border-radius:8px;
    padding:4px;
    text-align:left;
    cursor:pointer;
    background:transparent;
    border:none;
  }
  .date-num{
    font-weight:600;
    font-size:14px;
    color:var(--blue);
  }
  .filled {
    transition:background-color 220ms ease;
  }

  .legend {
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    margin-top:8px;
    font-size:13px;
  }
  .legend .item{
    display:flex;
    gap:6px;
    align-items:center;
    padding:6px 8px;
    border-radius:10px;
    background:var(--beige);
    color:var(--muted);
    font-weight:600;
  }
  .swatch{width:14px;height:14px;border-radius:4px;border:1px solid rgba(0,0,0,0.06);}

  /* меню: делаем max-height и прокрутку вместо покрытия всего экрана */
  .menu {
    position:fixed;
    left:0;right:0;bottom:0;
    background:linear-gradient(180deg,#fff, #f7fbff);
    border-top-left-radius:14px;
    border-top-right-radius:14px;
    box-shadow: 0 -18px 40px rgba(20,40,80,0.12);
    padding:12px;
    display:none;
    z-index:40;
    max-height:46vh;
    overflow:auto;
